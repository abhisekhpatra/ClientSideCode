<!DOCTYPE html>

<html>
<meta charset="utf-8">
<head>
  <script src="http://d3js.org/d3.v3.min.js"></script>
  <script src="http://labratrevenge.com/d3-tip/javascripts/d3.tip.min.js"></script>
  <script type='text/javascript' src='//code.jquery.com/jquery-1.10.1.js'></script>
  <script src="//code.jquery.com/ui/1.11.4/jquery-ui.js"></script>
  
  <style type="text/css">
  body {
    font: 11px sans-serif;
    margin: 10px;
  }

  .axis path,
  .axis line {
    fill: none;
    stroke: #000;
    shape-rendering: crispEdges;
  }



  .x.axis path {
    display: none;
  }
  .hue{
    
      float: left;
    margin-left: 0.5%;
  }
  
 .svg{
   background-color: WhiteSmoke;
  margin-left:  0.5%;
   
   
}


  </style>
</head>

<body>
     
<div id="vis">
<!--  <div class="hue" id="test1"></div>
  <div class="hue" id="test2"></div>
  <div class="hue" id="test3"></div>
  <div class="hue" id="test4"></div>
  <div class="hue" id="test5"></div>-->
</div>


<script type="text/javascript">
    
 $(function() {
   // $( "#sortable1" ).sortable();
    $( "#sortable1" ).disableSelection();
   //  $( "#sortable2" ).sortable();
    $( "#sortable2" ).disableSelection();
 

var margin = {top: 45, right: 0, bottom: 20, left: 0},
    width = (($("#vis").width())/5) - 10;
    height = 200 - margin.top - margin.bottom;

var formatPercent = d3.format(".0%");



var x = d3.scale.ordinal()
    .rangeRoundBands([0, width], .1);

// Scales. Note the inverted domain fo y-scale: bigger is up!
var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    .tickFormat(formatPercent);

d3.csv("AffectPalette.csv", type, function(data) {
calm=[];
data.forEach(function(d){
    
    calm.push(d.calm);
})
loadChart();
});



function loadChart(){
    

d3.csv("BarCategory.csv", type, function(data) {


  var category = d3.nest()
      .key(function(d) { return d.chart; })
      .entries(data);

  x.domain(data.map(function(d) { return d.letter; }));
  y.domain([0, d3.max(category, function(s) { return s.values[0].frequency; })]);

for(i=0;i<category.length;i++){
    var svg = d3.select("#vis")
    .append("svg")
    .attr("width", width)
    .attr("height", height + margin.top + margin.bottom)
    .attr("class", "svg")
    .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");
    var col=(calm[i].replace(/\"/g, "")).split(',');
var color = d3.scale.ordinal()
          .range(col)
          .domain([1,2,3,4,5]);
bars = d3.nest()
      .key(function(d) {return d.chart; })
      .entries(category[i].values);
    
      
      
          svg.selectAll(".bar"+i)
      .data(bars[0].values)
      .enter()
      .append("rect")
      .attr("class", "bar")
      .attr("x", function(d) { return x(d.letter); })
      .attr("width", x.rangeBand())
      .attr("y", function(d) { return y(d.frequency); })
      .attr("height", function(d) { return height - y(d.frequency); })
      .attr("fill", function(d) {return color(d.color)});
      
  


}
  


  // Accessing nested data: https://groups.google.com/forum/#!topic/d3-js/kummm9mS4EA
  // data(function(d) {return d.values;}) 
  // this will dereference the values for nested data for each group
 
      

$(".hue").css("width", d3.select("svg").style("width"));

});
}

 });
 

function type(d) {
  d.letter = +d.letter;
  d.frequency = +d.frequency;
  return d;
}

</script>



<div id="chart1">

<div class="hue" id="test1">
        <label>Select Rank:</label>  
        <input type="radio" name="chart1" value="1">1
        <input type="radio" name="chart1" value="2">2
        <input type="radio" name="chart1" value="3">3 
        <input type="radio" name="chart1" value="3">4
        <input type="radio" name="chart1" value="3">5
</div>
    <div class="hue" id="test2">
        <label>Select Rank:</label>  
        <input type="radio" name="chart2" value="1">1
        <input type="radio" name="chart2" value="2">2
        <input type="radio" name="chart2" value="3">3 
        <input type="radio" name="chart2" value="3">4
        <input type="radio" name="chart2" value="3">5
    </div>
    <div class="hue" id="test3">
        <label>Select Rank:</label>  
        <input type="radio" name="chart3" value="1">1
        <input type="radio" name="chart3" value="2">2
        <input type="radio" name="chart3" value="3">3 
        <input type="radio" name="chart3" value="3">4
        <input type="radio" name="chart3" value="3">5
    </div>
    <div class="hue" id="test4">
        <label>Select Rank:</label>  
        <input type="radio" name="chart4" value="1">1
        <input type="radio" name="chart4" value="2">2
        <input type="radio" name="chart4" value="3">3 
        <input type="radio" name="chart4" value="3">4
        <input type="radio" name="chart4" value="3">5
    </div>
  <div class="hue" id="test5"><label>Select Rank:</label>  
        <input type="radio" name="chart5" value="1">1
        <input type="radio" name="chart5" value="2">2
        <input type="radio" name="chart5" value="3">3 
        <input type="radio" name="chart5" value="3">4
        <input type="radio" name="chart5" value="3">5
  </div>

</div>
</body>
</html>